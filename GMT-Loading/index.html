<html>
    <head>
        <link href="index.css" rel="stylesheet" type="text/css" />
        <link href="snow.css" rel="stylesheet" type="text/css" />
        <link rel="stylesheet/less" type="text/css" href="index.less" />
        <script src="less.js" type="text/javascript"></script>

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&display=swap" rel="stylesheet"> 
    </head>
    <body>
        <div class="backdrop">
			<div class="centre_image">
			    <!-- <div class="snowflakes" aria-hidden="true">
                    <div class="snowflake">
                        ‚ù§
                    </div>
                    <div class="snowflake">
                        ‚ù§
                    </div>
                    <div class="snowflake">
                        ‚ù§
                    </div>
                    <div class="snowflake">
                        ‚ù§
                    </div>
                    <div class="snowflake">
                        ‚ù§
                    </div>
                    <div class="snowflake">
                        ‚ù§
                    </div>
                    <div class="snowflake">
                        ‚ù§
                    </div>
                    <div class="snowflake">
                        ‚ù§
                    </div>
                    <div class="snowflake">
                        ‚ù§
                    </div>
                    <div class="snowflake">
                        ‚ù§
                    </div>
                </div> -->
			
			
                <!-- <div class="snowflakes" aria-hidden="true">
                    <div class="snowflake">
                        ‚ùÖ
                    </div>
                    <div class="snowflake">
                        ‚ùÖ
                    </div>
                    <div class="snowflake">
                        ‚ùÜ
                    </div>
                    <div class="snowflake">
                        ‚ùÑ
                    </div>
                    <div class="snowflake">
                        ‚ùÖ
                    </div>
                    <div class="snowflake">
                        ‚ùÜ
                    </div>
                    <div class="snowflake">
                        ‚ùÑ
                    </div>
                    <div class="snowflake">
                        ‚ùÖ
                    </div>
                    <div class="snowflake">
                        ‚ùÜ
                    </div>
                    <div class="snowflake">
                        ‚ùÑ
                    </div>
                </div> -->
				
                <!-- <div class="snowflakes" aria-hidden="true"> -->
                    <!-- <div class="snowflake"> -->
                        <!-- üéÉ -->
                    <!-- </div> -->
                    <!-- <div class="snowflake"> -->
                        <!-- üéÉ -->
                    <!-- </div> -->
                    <!-- <div class="snowflake"> -->
                        <!-- üéÉ -->
                    <!-- </div> -->
                    <!-- <div class="snowflake"> -->
                        <!-- üéÉ -->
                    <!-- </div> -->
                    <!-- <div class="snowflake"> -->
                        <!-- üéÉ -->
                    <!-- </div> -->
                    <!-- <div class="snowflake"> -->
                        <!-- üéÉ -->
                    <!-- </div> -->
                    <!-- <div class="snowflake"> -->
                        <!-- üéÉ -->
                    <!-- </div> -->
                    <!-- <div class="snowflake"> -->
                        <!-- üéÉ -->
                    <!-- </div> -->
                    <!-- <div class="snowflake"> -->
                        <!-- üéÉ -->
                    <!-- </div> -->
                    <!-- <div class="snowflake"> -->
                        <!-- üéÉ -->
                    <!-- </div> -->
                <!-- </div> -->

				
                <!-- <img class="loading_bar" src="images/loading.gif"/>
                <a class="loading_bar" style="left:78%;color: antiquewhite;width: auto;font-family: 'Roboto', sans-serif;">Loading CMG British RP</a> -->
				<img src="images/main_background.png" class="main_background" id="mainBackgroundImage">
				<!-- <img src="images/smoke.png" class="main_background"> -->
				<img src="images/background_1.png" class="gta_background_image" style="display:none;" id="backgroundImage">
				<img src="images/image_1.png" class="gta_character_image" style="display:none;" id="characterImage">
			</div>
        </div>
        <audio id="Loading" autoplay loop >
            <source src="music/tune.webm" type="audio/ogg">
        </audio>    
        <audio id="Siren">
            <source src="music/siren.ogg" type="audio/ogg">
        </audio>    
        <audio id="Carjack" autoplay>
            <source src="music/carjack.ogg" type="audio/ogg">
        </audio>    
    </body>

    <script type="text/javascript">
        // this will actually restart the loading bar a lot, making multiple loading bars is an exercise to the reader... for now.
        // for a set of possible events, see https://github.com/citizenfx/fivem/blob/master/code/components/loading-screens-five/src/LoadingScreens.cpp
        
        
        setTimeout(function(){ 
            $('#mainBackgroundImage').fadeOut(2000).queue(function() {
                $('#mainBackgroundImage').show
                $('#backgroundImage').fadeIn();
                $('#characterImage').fadeIn();
            });
        }, 3000);

        var elem = document.getElementById("characterImage"); 
        var pos = 50;
        var id = setInterval(frame, 0);
        var direction = 0.01;
        var stage = 1;


        //clearInterval(id);
        function frame() {
            if (pos > 70.0 && stage == 1) {
                direction = 0.01;
                $('#backgroundImage').fadeOut(1000).queue(function() {
                    var img = $(this);
                    stage = 2;
                    img.attr('src', "images/background_2.png");
                    $("#backgroundImage").on('load', function(){
                        img.fadeIn(1000);
                        img.dequeue();
                    });
                });
                $('#characterImage').fadeOut(1000).queue(function() {
                    var img = $(this);
                    elem.style.left = 35 + '%';
                    pos = 35;
                    stage = 2;
                    img.attr('src', "images/image_2.png");
                    $("#characterImage").on('load', function(){
                        img.fadeIn(1000);
                        img.dequeue();
                    });
                });
            } else if (pos > 60.0 && stage == 2) {
                direction = 0.01;
                $('#backgroundImage').fadeOut(1000).queue(function() {
                    var img = $(this);
                    stage = 3;
                    img.attr('src', "images/background_3.png");
                    $("#backgroundImage").on('load', function(){
                        img.fadeIn(1000);
                        img.dequeue();
                    });
                });
                $('#characterImage').fadeOut(1000).queue(function() {
                    var img = $(this);
                    elem.style.left = 25 + '%';
                    pos = 25;
                    stage = 3;
                    img.attr('src', "images/image_3.png");
                    $("#characterImage").on('load', function(){
                        img.fadeIn(1000);
                        img.dequeue();
                    });
                });
            } else if (pos > 60.0 && stage == 3) {
                direction = -0.01;
                $('#backgroundImage').fadeOut(1000).queue(function() {
                    var img = $(this);
                    img.attr('src', "images/background_4.png");
                    stage = 4;
                    $("#backgroundImage").on('load', function(){
                        img.fadeIn(1000);
                        img.dequeue();
                    });         
                });
                $('#characterImage').fadeOut(1000).queue(function() {
                    var img = $(this);
                    img.attr('src', "images/image_4.png");
                    elem.style.left = 80 + '%';
                    pos = 80;
                    stage = 4;
                    $("#characterImage").on('load', function(){
                        img.fadeIn(1000);
                        img.dequeue();
                    });
                });
            } else if (pos < 50.0 && stage == 4) {
                direction = 0.01;
                $('#backgroundImage').fadeOut(1000).queue(function() {
                    var img = $(this);
                    img.attr('src', "images/background_2.png");
                    stage = 5;
                    $("#backgroundImage").on('load', function(){
                        img.fadeIn(1000);
                        img.dequeue();
                    });         
                });
                $('#characterImage').fadeOut(1000).queue(function() {
                    var img = $(this);
                    img.attr('src', "images/image_5.png");
                    elem.style.left = 55 + '%';
                    pos = 55;
                    stage = 5;
                    $("#characterImage").on('load', function(){
                        img.fadeIn(1000);
                        img.dequeue();
                    });
                });        
            } else if (pos > 70.0 && stage == 5) {
                direction = 0.01;
                $('#backgroundImage').fadeOut(1000).queue(function() {
                    var img = $(this);
                    img.attr('src', "images/background_1.png");
                    stage = 1;
                    $("#backgroundImage").on('load', function(){
                        img.fadeIn(1000);
                        img.dequeue();
                    });         
                });
                $('#characterImage').fadeOut(1000).queue(function() {
                    var img = $(this);
                    img.attr('src', "images/image_1.png");
                    elem.style.left = 40 + '%';
                    pos = 40;
                    stage = 1;
                    $("#characterImage").on('load', function(){
                        img.fadeIn(1000);
                        img.dequeue();
                    });
                });        
            } else {
                pos = pos + direction; 
                //console.log("element pos: " + pos);
                elem.style.left = pos + '%'; 
            }
        }
    </script>

    <script>
        var vid = document.getElementById("Loading");
        var paused = false;
        vid.volume = 0.3
        var sirenSound = document.getElementById("Siren");
        sirenSound.volume = 0.1
        var carJackSound = document.getElementById("Carjack");
        carJackSound.volume = 0.2

        setTimeout(function(){ 
            sirenSound.play()
        }, 1000);

        document.body.onkeyup = function(e){
        if(e.keyCode == 32){
            if (paused == true) {
                vid.play();
                paused = false;
            }else {
                vid.pause();
                paused = true;
            }
        }
    }

    </script>
</html>
